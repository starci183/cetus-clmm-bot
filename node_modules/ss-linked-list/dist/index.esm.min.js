import Comparator from"ss-comparator";var SinglyNode=function(){return function(t){this.value=t,this.next=null}}(),DoublyNode=function(){return function(t){this.value=t,this.next=null,this.prev=null}}(),extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function __extends(t,e){function r(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}function __generator(t,e){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}function __read(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a}function __spread(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(__read(arguments[e]));return t}var OBFUSCATED_ERROR="obfuse error occur";function invariant(t,e){if(!t)throw new Error("[linked-list] "+(e||OBFUSCATED_ERROR))}var INDEX_NOT_FOUND=-1,List=function(){function t(){for(var t=this,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this._head=null,this._tail=null,this._length=0,this.compare=new Comparator,e.length>0&&e.forEach(function(e){t.append(e)})}return Object.defineProperty(t.prototype,"head",{get:function(){return this._head?this._head.value:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tail",{get:function(){return this._tail?this._tail.value:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"loopLength",{get:function(){var t=!1,e=1;if(!this._head)return 0;for(var r=this._head,n=this._head;n.next&&n.next.next;)if(n=n.next.next,(r=r.next)===n){t=!0;break}if(t){for(n=n.next;r!==n;)e++,n=n.next;return e}return 0},enumerable:!0,configurable:!0}),t.prototype.getNode=function(t){var e=this._length;invariant(e>0&&t>=0&&t<e,"[linked-list] index "+t+" out of scope of list, which length is "+e);for(var r=this._head,n=0;n<t;)r=r.next,n++;return r},t.prototype.get=function(t){var e=this.getNode(t);return e?e.value:null},t.prototype.find=function(t){var e=t.value,r=t.callback;if(!this._head)return null;for(var n=this._head;n;){if(r&&r(n.value))return n;if(void 0!==e&&this.compare.equal(n.value,e))return n;n=n.next}return null},t.prototype.indexOf=function(t){if(!this._head)return INDEX_NOT_FOUND;for(var e=this._head,r=-1;e.next;){if(r++,this.compare.equal(e.value,t))return r;e=e.next}return e===this._tail&&this.compare.equal(e.value,t)&&(r+=1),r},t.prototype.first=function(t){invariant(t>=0,"[linked-list] param 'num' ("+t+") should not less than 0");for(var e=this.iterator(),r=[],n=Math.min(t,this.length),i=0;i<n;i++){var o=e.next();r.push(o.value)}return r},t.prototype.toArray=function(){return __spread(this)},t.prototype.isEmpty=function(){return null===this._head},t.prototype.iterator=function(){var t;return __generator(this,function(e){switch(e.label){case 0:t=this._head,e.label=1;case 1:return t?[4,t.value]:[3,3];case 2:return e.sent(),t=t.next,[3,1];case 3:return[2]}})},t.prototype[Symbol.iterator]=function(){return this.iterator()},t}(),SinglyList=function(t){function e(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return t.apply(this,__spread(e))||this}return __extends(e,t),e.prototype.append=function(t){var e=new SinglyNode(t);return this._tail?(this._tail.next=e,this._tail=e):this._head=this._tail=e,this._length++,!0},e.prototype.prepend=function(t){var e=new SinglyNode(t);return this._head?(e.next=this._head,this._head=e):this._head=this._tail=e,this._length++,!0},e.prototype.remove=function(t){var e=this._head;if(e){if(this.compare.equal(e.value,t))return e.next?(this._head=e.next,e.next=null):this._head=this._tail=null,this._length--,t;for(var r=e;;){if(this.compare.equal(e.value,t))return e.next?r.next=e.next:(this._tail=r,this._tail.next=null),e.next=null,this._length--,t;if(!e.next)return;r=e,e=e.next}}},e.prototype.removeHead=function(){var t=this._head;if(t)return this._head.next?(this._head=t.next,t.next=null):(this._head=null,this._tail=null),this._length--,t.value},e.prototype.removeTail=function(){var t=this._tail;if(t){if(this._head.next){for(var e=this._head;e.next!==t;)e=e.next;e.next=null,this._tail=e}else this._head=null,this._tail=null;return this._length--,t.value}},e.prototype.reverse=function(){if(this._head){var t,e=this._head,r=null;for(this._tail=this._head;null!==e;)t=e.next,e.next=r,r=e,e=t;this._head=r}},e.prototype.clone=function(){var t=this.toArray();return new(e.bind.apply(e,__spread([void 0],t)))},e}(List),AbstractCircleSinglyList=function(t){function e(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=t.apply(this,__spread(e))||this;return n.cyclization(),n}return __extends(e,t),e.prototype.iterator=function(){var t;return __generator(this,function(e){switch(e.label){case 0:t=this._head,e.label=1;case 1:return t?[4,t.value]:[3,3];case 2:return e.sent(),(t=t.next)===this._head&&(t=null),[3,1];case 3:return[2]}})},e.prototype.circleIterator=function(){var t;return __generator(this,function(e){switch(e.label){case 0:t=this._head,e.label=1;case 1:return t?[4,t.value]:[3,3];case 2:return e.sent(),t=t.next,[3,1];case 3:return[2]}})},e.prototype[Symbol.iterator]=function(){return this.iterator()},e.prototype.mapToNormalListFn=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.breakCircle();var i=t.prototype[e].apply(this,r);return this.cyclization(),i},e.prototype.getNode=function(t){return this.mapToNormalListFn("getNode",t)},e.prototype.append=function(t){return this.mapToNormalListFn("append",t)},e.prototype.prepend=function(t){return this.mapToNormalListFn("prepend",t)},e.prototype.find=function(t){return this.mapToNormalListFn("find",t)},e.prototype.indexOf=function(t){return this.mapToNormalListFn("indexOf",t)},e.prototype.remove=function(t){return this.mapToNormalListFn("remove",t)},e.prototype.removeHead=function(){return this.mapToNormalListFn("removeHead")},e.prototype.removeTail=function(){return this.mapToNormalListFn("removeTail")},e.prototype.first=function(t){invariant(t>=0,"[linked-list] param 'num' ("+t+") should not less than 0");for(var e=this.circleIterator(),r=[],n=0;n<t;n++){var i=e.next();r.push(i.value)}return r},e.prototype.toArray=function(){return this.mapToNormalListFn("toArray")},e.prototype.reverse=function(){return this.mapToNormalListFn("reverse")},e}(SinglyList),CircleSinglyList=function(t){function e(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=t.apply(this,__spread(e))||this;return n.cyclization(),n}return __extends(e,t),e.prototype.breakCircle=function(){this._tail&&this._tail.next===this._head&&(this._tail.next=null)},e.prototype.cyclization=function(){this._tail&&null===this._tail.next&&(this._tail.next=this._head)},e.prototype.clone=function(){var t=this.toArray();return new(e.bind.apply(e,__spread([void 0],t)))},e}(AbstractCircleSinglyList),DoublyList=function(t){function e(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return t.apply(this,__spread(e))||this}return __extends(e,t),e.prototype.append=function(t){var e=new DoublyNode(t);return this._tail?(this._tail.next=e,e.prev=this._tail,this._tail=e):this._head=this._tail=e,this._length++,!0},e.prototype.prepend=function(t){var e=new DoublyNode(t);return this._head?(e.next=this._head,this._head.prev=e,this._head=e):this._head=this._tail=e,this._length++,!0},e.prototype.remove=function(t){var e=this._head;if(e){if(this.compare.equal(e.value,t))return e.next?(this._head=e.next,this._head.prev=null,e.next=e.prev=null):this._head=this._tail=null,this._length--,t;for(;;){if(this.compare.equal(e.value,t))return e.next?(e.prev.next=e.next,e.next.prev=e.prev,e.next=e.prev=null):(e.prev.next=null,this._tail=e.prev,e.next=e.prev=null),this._length--,e.value;if(!e.next)return;e=e.next}}},e.prototype.removeHead=function(){var t=this._head;if(t)return this._head.next?(t.next.prev=null,this._head=t.next,t.next=null):(this._head=null,this._tail=null),this._length--,t.value},e.prototype.removeTail=function(){var t=this._tail;if(t)return this._head.next?(t.prev.next=null,this._tail=t.prev,t.next=t.prev=null):(this._head=null,this._tail=null),this._length--,t.value},e.prototype.reverse=function(){if(this._head){var t,e=this._head,r=null;for(this._tail=this._head;null!==e;)t=e.next,e.next=r,e.prev=t,r=e,e=t;this._head=r}},e.prototype.clone=function(){var t=this.toArray();return new(e.bind.apply(e,__spread([void 0],t)))},e}(List),AbstractCircleDoublyList=function(t){function e(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=t.apply(this,__spread(e))||this;return n.cyclization(),n}return __extends(e,t),e.prototype.iterator=function(){var t;return __generator(this,function(e){switch(e.label){case 0:t=this._head,e.label=1;case 1:return t?[4,t.value]:[3,3];case 2:return e.sent(),(t=t.next)===this._head&&(t=null),[3,1];case 3:return[2]}})},e.prototype.circleIterator=function(){var t;return __generator(this,function(e){switch(e.label){case 0:t=this._head,e.label=1;case 1:return t?[4,t.value]:[3,3];case 2:return e.sent(),t=t.next,[3,1];case 3:return[2]}})},e.prototype[Symbol.iterator]=function(){return this.iterator()},e.prototype.mapToNormalListFn=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.breakCircle();var i=t.prototype[e].apply(this,r);return this.cyclization(),i},e.prototype.getNode=function(t){return this.mapToNormalListFn("getNode",t)},e.prototype.append=function(t){return this.mapToNormalListFn("append",t)},e.prototype.prepend=function(t){return this.mapToNormalListFn("prepend",t)},e.prototype.find=function(t){return this.mapToNormalListFn("find",t)},e.prototype.indexOf=function(t){return this.mapToNormalListFn("indexOf",t)},e.prototype.remove=function(t){return this.mapToNormalListFn("remove",t)},e.prototype.removeHead=function(){return this.mapToNormalListFn("removeHead")},e.prototype.removeTail=function(){return this.mapToNormalListFn("removeTail")},e.prototype.first=function(t){invariant(t>=0,"[linked-list] param 'num' ("+t+") should not less than 0");for(var e=this.circleIterator(),r=[],n=0;n<t;n++){var i=e.next();r.push(i.value)}return r},e.prototype.toArray=function(){return this.mapToNormalListFn("toArray")},e.prototype.reverse=function(){return this.mapToNormalListFn("reverse")},e}(DoublyList),CircleDoublyList=function(t){function e(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=t.apply(this,__spread(e))||this;return n.cyclization(),n}return __extends(e,t),e.prototype.breakCircle=function(){this._tail&&this._head&&this._tail.next===this._head&&(this._tail.next=null,this._head.prev=null)},e.prototype.cyclization=function(){this._head&&this._tail&&null===this._tail.next&&(this._tail.next=this._head,this._head.prev=this._tail)},e.prototype.clone=function(){var t=this.toArray();return new(e.bind.apply(e,__spread([void 0],t)))},e}(AbstractCircleDoublyList);export{SinglyNode,DoublyNode,SinglyList,AbstractCircleSinglyList,CircleSinglyList,DoublyList,AbstractCircleDoublyList,CircleDoublyList};
