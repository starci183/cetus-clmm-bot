!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.Index={})}(this,function(t){"use strict";var r=function(t){this.value=t,this.next=null},n=function(t){this.value=t,this.next=null,this.prev=null},i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function e(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}function o(r,n){var i,o,a,t,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;l;)try{if(i=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,o=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!(a=0<(a=l.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){l=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){l.label=e[1];break}if(6===e[0]&&l.label<a[1]){l.label=a[1],a=e;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(e);break}a[2]&&l.ops.pop(),l.trys.pop();continue}e=n.call(r,l)}catch(t){e=[6,t],o=0}finally{i=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function a(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),a=[];try{for(;(void 0===e||0<e--)&&!(n=o.next()).done;)a.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a}function l(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(a(arguments[e]));return t}function u(t,e){if(!t)throw new Error("[linked-list] "+(e||"obfuse error occur"))}var h,s;(s=h=h||{})[s.EQUAL=0]="EQUAL",s[s.GREATER=1]="GREATER",s[s.LESS=-1]="LESS";var p=(c.defaultCompareFunction=function(t,e){return t===e?h.EQUAL:t<e?h.LESS:h.GREATER},c.prototype.equal=function(t,e){return this.compare(t,e)===h.EQUAL},c.prototype.lessThan=function(t,e){return this.compare(t,e)===h.LESS},c.prototype.greaterThan=function(t,e){return this.compare(t,e)===h.GREATER},c.prototype.lessThanOrEqual=function(t,e){return this.lessThan(t,e)||this.equal(t,e)},c.prototype.greaterThanOrEqual=function(t,e){return this.greaterThan(t,e)||this.equal(t,e)},c.prototype.reverse=function(){var r=this.compare;this.compare=function(t,e){return r(e,t)}},c);function c(t){this.compare=t||c.defaultCompareFunction}var f=(Object.defineProperty(v.prototype,"head",{get:function(){return this._head?this._head.value:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"tail",{get:function(){return this._tail?this._tail.value:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"loopLength",{get:function(){var t=!1,e=1;if(!this._head)return 0;for(var r=this._head,n=this._head;n.next&&n.next.next;)if(n=n.next.next,(r=r.next)===n){t=!0;break}if(t){for(n=n.next;r!==n;)e++,n=n.next;return e}return 0},enumerable:!0,configurable:!0}),v.prototype.getNode=function(t){var e=this._length;u(0<e&&0<=t&&t<e,"[linked-list] index "+t+" out of scope of list, which length is "+e);for(var r=this._head,n=0;n<t;)r=r.next,n++;return r},v.prototype.get=function(t){var e=this.getNode(t);return e?e.value:null},v.prototype.find=function(t){var e=t.value,r=t.callback;if(!this._head)return null;for(var n=this._head;n;){if(r&&r(n.value))return n;if(void 0!==e&&this.compare.equal(n.value,e))return n;n=n.next}return null},v.prototype.indexOf=function(t){if(!this._head)return-1;for(var e=this._head,r=-1;e.next;){if(r++,this.compare.equal(e.value,t))return r;e=e.next}return e===this._tail&&this.compare.equal(e.value,t)&&(r+=1),r},v.prototype.first=function(t){u(0<=t,"[linked-list] param 'num' ("+t+") should not less than 0");for(var e=this.iterator(),r=[],n=Math.min(t,this.length),i=0;i<n;i++){var o=e.next();r.push(o.value)}return r},v.prototype.toArray=function(){return l(this)},v.prototype.isEmpty=function(){return null===this._head},v.prototype.iterator=function(){var e;return o(this,function(t){switch(t.label){case 0:e=this._head,t.label=1;case 1:return e?[4,e.value]:[3,3];case 2:return t.sent(),e=e.next,[3,1];case 3:return[2]}})},v.prototype[Symbol.iterator]=function(){return this.iterator()},v);function v(){for(var e=this,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this._head=null,this._tail=null,this._length=0,this.compare=new p,0<t.length&&t.forEach(function(t){e.append(t)})}var d,y=(e(_,d=f),_.prototype.append=function(t){var e=new r(t);return this._tail?(this._tail.next=e,this._tail=e):this._head=this._tail=e,this._length++,!0},_.prototype.prepend=function(t){var e=new r(t);return this._head?(e.next=this._head,this._head=e):this._head=this._tail=e,this._length++,!0},_.prototype.remove=function(t){var e=this._head;if(e){if(this.compare.equal(e.value,t))return e.next?(this._head=e.next,e.next=null):this._head=this._tail=null,this._length--,t;for(var r=e;;){if(this.compare.equal(e.value,t))return e.next?r.next=e.next:(this._tail=r,this._tail.next=null),e.next=null,this._length--,t;if(!e.next)return;e=(r=e).next}}},_.prototype.removeHead=function(){var t=this._head;if(t)return this._head.next?(this._head=t.next,t.next=null):(this._head=null,this._tail=null),this._length--,t.value},_.prototype.removeTail=function(){var t=this._tail;if(t){if(this._head.next){for(var e=this._head;e.next!==t;)e=e.next;e.next=null,this._tail=e}else this._head=null,this._tail=null;return this._length--,t.value}},_.prototype.reverse=function(){if(this._head){var t,e=this._head,r=null;for(this._tail=this._head;null!==e;)t=e.next,e.next=r,r=e,e=t;this._head=r}},_.prototype.clone=function(){var t=this.toArray();return new(_.bind.apply(_,l([void 0],t)))},_);function _(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return d.apply(this,l(t))||this}var m,x=(e(b,m=y),b.prototype.iterator=function(){var e;return o(this,function(t){switch(t.label){case 0:e=this._head,t.label=1;case 1:return e?[4,e.value]:[3,3];case 2:return t.sent(),(e=e.next)===this._head&&(e=null),[3,1];case 3:return[2]}})},b.prototype.circleIterator=function(){var e;return o(this,function(t){switch(t.label){case 0:e=this._head,t.label=1;case 1:return e?[4,e.value]:[3,3];case 2:return t.sent(),e=e.next,[3,1];case 3:return[2]}})},b.prototype[Symbol.iterator]=function(){return this.iterator()},b.prototype.mapToNormalListFn=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];this.breakCircle();var n=m.prototype[t].apply(this,e);return this.cyclization(),n},b.prototype.getNode=function(t){return this.mapToNormalListFn("getNode",t)},b.prototype.append=function(t){return this.mapToNormalListFn("append",t)},b.prototype.prepend=function(t){return this.mapToNormalListFn("prepend",t)},b.prototype.find=function(t){return this.mapToNormalListFn("find",t)},b.prototype.indexOf=function(t){return this.mapToNormalListFn("indexOf",t)},b.prototype.remove=function(t){return this.mapToNormalListFn("remove",t)},b.prototype.removeHead=function(){return this.mapToNormalListFn("removeHead")},b.prototype.removeTail=function(){return this.mapToNormalListFn("removeTail")},b.prototype.first=function(t){u(0<=t,"[linked-list] param 'num' ("+t+") should not less than 0");for(var e=this.circleIterator(),r=[],n=0;n<t;n++){var i=e.next();r.push(i.value)}return r},b.prototype.toArray=function(){return this.mapToNormalListFn("toArray")},b.prototype.reverse=function(){return this.mapToNormalListFn("reverse")},b);function b(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=m.apply(this,l(t))||this;return r.cyclization(),r}var g,T=(e(L,g=x),L.prototype.breakCircle=function(){this._tail&&this._tail.next===this._head&&(this._tail.next=null)},L.prototype.cyclization=function(){this._tail&&null===this._tail.next&&(this._tail.next=this._head)},L.prototype.clone=function(){var t=this.toArray();return new(L.bind.apply(L,l([void 0],t)))},L);function L(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=g.apply(this,l(t))||this;return r.cyclization(),r}var N,w=(e(F,N=f),F.prototype.append=function(t){var e=new n(t);return this._tail?((this._tail.next=e).prev=this._tail,this._tail=e):this._head=this._tail=e,this._length++,!0},F.prototype.prepend=function(t){var e=new n(t);return this._head?(e.next=this._head,this._head.prev=e,this._head=e):this._head=this._tail=e,this._length++,!0},F.prototype.remove=function(t){var e=this._head;if(e){if(this.compare.equal(e.value,t))return e.next?(this._head=e.next,this._head.prev=null,e.next=e.prev=null):this._head=this._tail=null,this._length--,t;for(;;){if(this.compare.equal(e.value,t))return e.next?(e.prev.next=e.next,e.next.prev=e.prev):(e.prev.next=null,this._tail=e.prev),e.next=e.prev=null,this._length--,e.value;if(!e.next)return;e=e.next}}},F.prototype.removeHead=function(){var t=this._head;if(t)return this._head.next?(t.next.prev=null,this._head=t.next,t.next=null):(this._head=null,this._tail=null),this._length--,t.value},F.prototype.removeTail=function(){var t=this._tail;if(t)return this._head.next?(t.prev.next=null,this._tail=t.prev,t.next=t.prev=null):(this._head=null,this._tail=null),this._length--,t.value},F.prototype.reverse=function(){if(this._head){var t,e=this._head,r=null;for(this._tail=this._head;null!==e;)t=e.next,e.next=r,e.prev=t,r=e,e=t;this._head=r}},F.prototype.clone=function(){var t=this.toArray();return new(F.bind.apply(F,l([void 0],t)))},F);function F(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return N.apply(this,l(t))||this}var E,A=(e(S,E=w),S.prototype.iterator=function(){var e;return o(this,function(t){switch(t.label){case 0:e=this._head,t.label=1;case 1:return e?[4,e.value]:[3,3];case 2:return t.sent(),(e=e.next)===this._head&&(e=null),[3,1];case 3:return[2]}})},S.prototype.circleIterator=function(){var e;return o(this,function(t){switch(t.label){case 0:e=this._head,t.label=1;case 1:return e?[4,e.value]:[3,3];case 2:return t.sent(),e=e.next,[3,1];case 3:return[2]}})},S.prototype[Symbol.iterator]=function(){return this.iterator()},S.prototype.mapToNormalListFn=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];this.breakCircle();var n=E.prototype[t].apply(this,e);return this.cyclization(),n},S.prototype.getNode=function(t){return this.mapToNormalListFn("getNode",t)},S.prototype.append=function(t){return this.mapToNormalListFn("append",t)},S.prototype.prepend=function(t){return this.mapToNormalListFn("prepend",t)},S.prototype.find=function(t){return this.mapToNormalListFn("find",t)},S.prototype.indexOf=function(t){return this.mapToNormalListFn("indexOf",t)},S.prototype.remove=function(t){return this.mapToNormalListFn("remove",t)},S.prototype.removeHead=function(){return this.mapToNormalListFn("removeHead")},S.prototype.removeTail=function(){return this.mapToNormalListFn("removeTail")},S.prototype.first=function(t){u(0<=t,"[linked-list] param 'num' ("+t+") should not less than 0");for(var e=this.circleIterator(),r=[],n=0;n<t;n++){var i=e.next();r.push(i.value)}return r},S.prototype.toArray=function(){return this.mapToNormalListFn("toArray")},S.prototype.reverse=function(){return this.mapToNormalListFn("reverse")},S);function S(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=E.apply(this,l(t))||this;return r.cyclization(),r}var O,k=(e(q,O=A),q.prototype.breakCircle=function(){this._tail&&this._head&&this._tail.next===this._head&&(this._tail.next=null,this._head.prev=null)},q.prototype.cyclization=function(){this._head&&this._tail&&null===this._tail.next&&(this._tail.next=this._head,this._head.prev=this._tail)},q.prototype.clone=function(){var t=this.toArray();return new(q.bind.apply(q,l([void 0],t)))},q);function q(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=O.apply(this,l(t))||this;return r.cyclization(),r}t.SinglyNode=r,t.DoublyNode=n,t.SinglyList=y,t.AbstractCircleSinglyList=x,t.CircleSinglyList=T,t.DoublyList=w,t.AbstractCircleDoublyList=A,t.CircleDoublyList=k,Object.defineProperty(t,"__esModule",{value:!0})});
