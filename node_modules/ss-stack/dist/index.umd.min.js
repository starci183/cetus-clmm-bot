!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.Index={})}(this,function(t){"use strict";function r(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),a=[];try{for(;(void 0===e||0<e--)&&!(n=o.next()).done;)a.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a}var n,e;(e=n=n||{})[e.EQUAL=0]="EQUAL",e[e.GREATER=1]="GREATER",e[e.LESS=-1]="LESS";var i=(o.defaultCompareFunction=function(t,e){return t===e?n.EQUAL:t<e?n.LESS:n.GREATER},o.prototype.equal=function(t,e){return this.compare(t,e)===n.EQUAL},o.prototype.lessThan=function(t,e){return this.compare(t,e)===n.LESS},o.prototype.greaterThan=function(t,e){return this.compare(t,e)===n.GREATER},o.prototype.lessThanOrEqual=function(t,e){return this.lessThan(t,e)||this.equal(t,e)},o.prototype.greaterThanOrEqual=function(t,e){return this.greaterThan(t,e)||this.equal(t,e)},o.prototype.reverse=function(){var r=this.compare;this.compare=function(t,e){return r(e,t)}},o);function o(t){this.compare=t||o.defaultCompareFunction}var a=function(t){this.value=t,this.next=null},l=function(t){this.value=t,this.next=null,this.prev=null},u=function(t,e){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function h(t,e){function r(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}function s(r,n){var i,o,a,t,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;l;)try{if(i=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,o=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!(a=0<(a=l.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){l=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){l.label=e[1];break}if(6===e[0]&&l.label<a[1]){l.label=a[1],a=e;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(e);break}a[2]&&l.ops.pop(),l.trys.pop();continue}e=n.call(r,l)}catch(t){e=[6,t],o=0}finally{i=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function p(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),a=[];try{for(;(void 0===e||0<e--)&&!(n=o.next()).done;)a.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a}function c(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(p(arguments[e]));return t}function f(t,e){if(!t)throw new Error("[linked-list] "+(e||"obfuse error occur"))}var v=(Object.defineProperty(d.prototype,"head",{get:function(){return this._head?this._head.value:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"tail",{get:function(){return this._tail?this._tail.value:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"loopLength",{get:function(){var t=!1,e=1;if(!this._head)return 0;for(var r=this._head,n=this._head;n.next&&n.next.next;)if(n=n.next.next,(r=r.next)===n){t=!0;break}if(t){for(n=n.next;r!==n;)e++,n=n.next;return e}return 0},enumerable:!0,configurable:!0}),d.prototype.getNode=function(t){var e=this._length;f(0<e&&0<=t&&t<e,"[linked-list] index "+t+" out of scope of list, which length is "+e);for(var r=this._head,n=0;n<t;)r=r.next,n++;return r},d.prototype.get=function(t){var e=this.getNode(t);return e?e.value:null},d.prototype.find=function(t){var e=t.value,r=t.callback;if(!this._head)return null;for(var n=this._head;n;){if(r&&r(n.value))return n;if(void 0!==e&&this.compare.equal(n.value,e))return n;n=n.next}return null},d.prototype.indexOf=function(t){if(!this._head)return-1;for(var e=this._head,r=-1;e.next;){if(r++,this.compare.equal(e.value,t))return r;e=e.next}return e===this._tail&&this.compare.equal(e.value,t)&&(r+=1),r},d.prototype.first=function(t){f(0<=t,"[linked-list] param 'num' ("+t+") should not less than 0");for(var e=this.iterator(),r=[],n=Math.min(t,this.length),i=0;i<n;i++){var o=e.next();r.push(o.value)}return r},d.prototype.toArray=function(){return c(this)},d.prototype.isEmpty=function(){return null===this._head},d.prototype.iterator=function(){var e;return s(this,function(t){switch(t.label){case 0:e=this._head,t.label=1;case 1:return e?[4,e.value]:[3,3];case 2:return t.sent(),e=e.next,[3,1];case 3:return[2]}})},d.prototype[Symbol.iterator]=function(){return this.iterator()},d);function d(){for(var e=this,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this._head=null,this._tail=null,this._length=0,this.compare=new i,0<t.length&&t.forEach(function(t){e.append(t)})}var y,_=(h(m,y=v),m.prototype.append=function(t){var e=new a(t);return this._tail?(this._tail.next=e,this._tail=e):this._head=this._tail=e,this._length++,!0},m.prototype.prepend=function(t){var e=new a(t);return this._head?(e.next=this._head,this._head=e):this._head=this._tail=e,this._length++,!0},m.prototype.remove=function(t){var e=this._head;if(e){if(this.compare.equal(e.value,t))return e.next?(this._head=e.next,e.next=null):this._head=this._tail=null,this._length--,t;for(var r=e;;){if(this.compare.equal(e.value,t))return e.next?r.next=e.next:(this._tail=r,this._tail.next=null),e.next=null,this._length--,t;if(!e.next)return;e=(r=e).next}}},m.prototype.removeHead=function(){var t=this._head;if(t)return this._head.next?(this._head=t.next,t.next=null):(this._head=null,this._tail=null),this._length--,t.value},m.prototype.removeTail=function(){var t=this._tail;if(t){if(this._head.next){for(var e=this._head;e.next!==t;)e=e.next;e.next=null,this._tail=e}else this._head=null,this._tail=null;return this._length--,t.value}},m.prototype.reverse=function(){if(this._head){var t,e=this._head,r=null;for(this._tail=this._head;null!==e;)t=e.next,e.next=r,r=e,e=t;this._head=r}},m.prototype.clone=function(){var t=this.toArray();return new(m.bind.apply(m,c([void 0],t)))},m);function m(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return y.apply(this,c(t))||this}var x,b=(h(g,x=_),g.prototype.iterator=function(){var e;return s(this,function(t){switch(t.label){case 0:e=this._head,t.label=1;case 1:return e?[4,e.value]:[3,3];case 2:return t.sent(),(e=e.next)===this._head&&(e=null),[3,1];case 3:return[2]}})},g.prototype.circleIterator=function(){var e;return s(this,function(t){switch(t.label){case 0:e=this._head,t.label=1;case 1:return e?[4,e.value]:[3,3];case 2:return t.sent(),e=e.next,[3,1];case 3:return[2]}})},g.prototype[Symbol.iterator]=function(){return this.iterator()},g.prototype.mapToNormalListFn=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];this.breakCircle();var n=x.prototype[t].apply(this,e);return this.cyclization(),n},g.prototype.getNode=function(t){return this.mapToNormalListFn("getNode",t)},g.prototype.append=function(t){return this.mapToNormalListFn("append",t)},g.prototype.prepend=function(t){return this.mapToNormalListFn("prepend",t)},g.prototype.find=function(t){return this.mapToNormalListFn("find",t)},g.prototype.indexOf=function(t){return this.mapToNormalListFn("indexOf",t)},g.prototype.remove=function(t){return this.mapToNormalListFn("remove",t)},g.prototype.removeHead=function(){return this.mapToNormalListFn("removeHead")},g.prototype.removeTail=function(){return this.mapToNormalListFn("removeTail")},g.prototype.first=function(t){f(0<=t,"[linked-list] param 'num' ("+t+") should not less than 0");for(var e=this.circleIterator(),r=[],n=0;n<t;n++){var i=e.next();r.push(i.value)}return r},g.prototype.toArray=function(){return this.mapToNormalListFn("toArray")},g.prototype.reverse=function(){return this.mapToNormalListFn("reverse")},g);function g(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=x.apply(this,c(t))||this;return r.cyclization(),r}var T;h(L,T=b),L.prototype.breakCircle=function(){this._tail&&this._tail.next===this._head&&(this._tail.next=null)},L.prototype.cyclization=function(){this._tail&&null===this._tail.next&&(this._tail.next=this._head)},L.prototype.clone=function(){var t=this.toArray();return new(L.bind.apply(L,c([void 0],t)))};function L(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=T.apply(this,c(t))||this;return r.cyclization(),r}var w,N=(h(k,w=v),k.prototype.append=function(t){var e=new l(t);return this._tail?((this._tail.next=e).prev=this._tail,this._tail=e):this._head=this._tail=e,this._length++,!0},k.prototype.prepend=function(t){var e=new l(t);return this._head?(e.next=this._head,this._head.prev=e,this._head=e):this._head=this._tail=e,this._length++,!0},k.prototype.remove=function(t){var e=this._head;if(e){if(this.compare.equal(e.value,t))return e.next?(this._head=e.next,this._head.prev=null,e.next=e.prev=null):this._head=this._tail=null,this._length--,t;for(;;){if(this.compare.equal(e.value,t))return e.next?(e.prev.next=e.next,e.next.prev=e.prev):(e.prev.next=null,this._tail=e.prev),e.next=e.prev=null,this._length--,e.value;if(!e.next)return;e=e.next}}},k.prototype.removeHead=function(){var t=this._head;if(t)return this._head.next?(t.next.prev=null,this._head=t.next,t.next=null):(this._head=null,this._tail=null),this._length--,t.value},k.prototype.removeTail=function(){var t=this._tail;if(t)return this._head.next?(t.prev.next=null,this._tail=t.prev,t.next=t.prev=null):(this._head=null,this._tail=null),this._length--,t.value},k.prototype.reverse=function(){if(this._head){var t,e=this._head,r=null;for(this._tail=this._head;null!==e;)t=e.next,e.next=r,e.prev=t,r=e,e=t;this._head=r}},k.prototype.clone=function(){var t=this.toArray();return new(k.bind.apply(k,c([void 0],t)))},k);function k(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return w.apply(this,c(t))||this}var E,F=(h(A,E=N),A.prototype.iterator=function(){var e;return s(this,function(t){switch(t.label){case 0:e=this._head,t.label=1;case 1:return e?[4,e.value]:[3,3];case 2:return t.sent(),(e=e.next)===this._head&&(e=null),[3,1];case 3:return[2]}})},A.prototype.circleIterator=function(){var e;return s(this,function(t){switch(t.label){case 0:e=this._head,t.label=1;case 1:return e?[4,e.value]:[3,3];case 2:return t.sent(),e=e.next,[3,1];case 3:return[2]}})},A.prototype[Symbol.iterator]=function(){return this.iterator()},A.prototype.mapToNormalListFn=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];this.breakCircle();var n=E.prototype[t].apply(this,e);return this.cyclization(),n},A.prototype.getNode=function(t){return this.mapToNormalListFn("getNode",t)},A.prototype.append=function(t){return this.mapToNormalListFn("append",t)},A.prototype.prepend=function(t){return this.mapToNormalListFn("prepend",t)},A.prototype.find=function(t){return this.mapToNormalListFn("find",t)},A.prototype.indexOf=function(t){return this.mapToNormalListFn("indexOf",t)},A.prototype.remove=function(t){return this.mapToNormalListFn("remove",t)},A.prototype.removeHead=function(){return this.mapToNormalListFn("removeHead")},A.prototype.removeTail=function(){return this.mapToNormalListFn("removeTail")},A.prototype.first=function(t){f(0<=t,"[linked-list] param 'num' ("+t+") should not less than 0");for(var e=this.circleIterator(),r=[],n=0;n<t;n++){var i=e.next();r.push(i.value)}return r},A.prototype.toArray=function(){return this.mapToNormalListFn("toArray")},A.prototype.reverse=function(){return this.mapToNormalListFn("reverse")},A);function A(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=E.apply(this,c(t))||this;return r.cyclization(),r}var O;h(S,O=F),S.prototype.breakCircle=function(){this._tail&&this._head&&this._tail.next===this._head&&(this._tail.next=null,this._head.prev=null)},S.prototype.cyclization=function(){this._head&&this._tail&&null===this._tail.next&&(this._tail.next=this._head,this._head.prev=this._tail)},S.prototype.clone=function(){var t=this.toArray();return new(S.bind.apply(S,c([void 0],t)))};function S(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=O.apply(this,c(t))||this;return r.cyclization(),r}var q=(Object.defineProperty(j.prototype,"length",{get:function(){return this.stack.length},enumerable:!0,configurable:!0}),Object.defineProperty(j.prototype,"peek",{get:function(){return this.stack.tail},enumerable:!0,configurable:!0}),j.prototype.isEmpty=function(){return this.stack.isEmpty()},j.prototype.push=function(t){return this.stack.append(t)},j.prototype.pop=function(){var t=this.stack.removeTail();return void 0!==t?t:void 0},j.prototype.popBottom=function(){var t=this.stack.removeHead();return void 0!==t?t:void 0},j.prototype.toArray=function(){return this.stack.toArray()},j);function j(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.stack=new(_.bind.apply(_,function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(r(arguments[e]));return t}([void 0],t)))}t.default=q,Object.defineProperty(t,"__esModule",{value:!0})});
